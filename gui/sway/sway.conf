# @sysconfdir@ doesn't appear to work
include /etc/sway/config.d/*
# Variables {{{
set {
	$Mod Mod4
	$Alt Mod1

	$Left h
	$Down j
	$Up k
	$Right l


	$increment_resize 40px

	$scripts $DOTFILES/desktop/sway/scripts
}
# }}}
# Startup {{{
output * background $HOME/documents/pictures/wallpapers/current fill

exec {
	udiskie --smart-tray
	xpad --no-new
	mako --config $DOTFILES/desktop/sway/mako.conf
	$scripts/screen_locker.sh idle

	otd
}

exec_always	{
	"pkill waybar; waybar --config $DOTFILES/desktop/waybar/config --style $DOTFILES/desktop/waybar/style.css"
}
# }}}
# Bindings {{{
# Modes {{{
mode "resize" {
	bindsym {
		$Left	resize shrink width $increment_resize
		$Down	resize grow height $increment_resize
		$Up		resize shrink height $increment_resize
		$Right	resize grow width $increment_resize

		Return mode "default"
		Escape mode "default"
	}
}
mode "dash" {
	bindsym	Escape exec $DOTFILES/desktop/sway/scripts/dash.sh close
}

bindsym $Mod+r mode "resize"
bindsym $Mod+d exec $DOTFILES/desktop/sway/scripts/dash.sh open
# }}}
# Layout {{{
floating_modifier $Mod normal
bindsym {
	$Mod+b				splith
	$Mod+v 				splitv

	$Mod+s				layout stacking
	$Mod+w 				layout tabbed
	$Mod+e 				layout toggle split

	$Mod+f				fullscreen

	$Mod+space			focus mode_toggle
	$Mod+a				focus parent

	$Mod+Shift+Space	floating toggle
}
# }}}
# Navigation {{{
# Windows
bindsym {
	$Mod+$Left			focus left
	$Mod+$Down			focus down
	$Mod+$Up			focus up
	$Mod+$Right			focus right

	$Mod+Shift+$Left	move left
	$Mod+Shift+$Down	move down
	$Mod+Shift+$Up		move up
	$Mod+Shift+$Right	move right
}
# Workspaces
bindsym {
	$Mod+1 workspace number 1
	$Mod+2 workspace number 2
	$Mod+3 workspace number 3
	$Mod+4 workspace number 4
	$Mod+5 workspace number 5
	$Mod+6 workspace number 6
	$Mod+7 workspace number 7
	$Mod+8 workspace number 8
	$Mod+9 workspace number 9
	$Mod+0 workspace number 10

	$Mod+Shift+1 move container to workspace number 1
	$Mod+Shift+2 move container to workspace number 2
	$Mod+Shift+3 move container to workspace number 3
	$Mod+Shift+4 move container to workspace number 4
	$Mod+Shift+5 move container to workspace number 5
	$Mod+Shift+6 move container to workspace number 6
	$Mod+Shift+7 move container to workspace number 7
	$Mod+Shift+8 move container to workspace number 8
	$Mod+Shift+9 move container to workspace number 9
	$Mod+Shift+0 move container to workspace number 10
}
# }}}
# Scratchpad {{{
bindsym $Mod+minus			scratchpad show
bindsym $Mod+Shift+minus	move scratchpad
# }}}
bindsym {
	$Mod+Return				exec kitty
	$Mod+n					exec xpad --new
	$Mod+Home				exec kitty --title "@calculator" qalc


	$Mod+Escape				exec $scripts/screen_locker.sh now
	$Mod+Shift+Escape		exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'
	$Mod+$Alt+Escape		reload
	$Mod+Shift+q			kill

	$Alt+Tab				workspace back_and_forth

	$Mod+p					exec $scripts/screen_capture.sh full
	$Mod+Shift+p			exec $scripts/screen_capture.sh selection
	$Mod+$Alt+p				exec $scripts/screen_capture.sh color


	XF86AudioRaiseVolume	exec pactl set-sink-volume @DEFAULT_SINK@ +5%
	XF86AudioLowerVolume	exec pactl set-sink-volume @DEFAULT_SINK@ -5%
	XF86AudioMute			exec pactl set-sink-mute @DEFAULT_SINK@ toggle
	XF86AudioMicMute		exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
}
# }}}
# Configuration {{{
# Input {{{
input "type:keyboard" {
	xkb_layout "us"
	repeat_delay 400
	repeat_rate 30
} 
input "type:pointer" {
	accel_profile flat
	pointer_accel -0.2
	scroll_factor 2
}
# }}}
# Decorations {{{
font pango:Inter 10
default_border none
default_floating_border none

smart_gaps on
gaps {
	outer 12
	inner 12
}
# }}}
output * {
	adaptive_sync on
}
#xwayland disable

seat * {
	hide_cursor {
		5000
		when-typing enable
	}
}
# }}}
# Rules {{{
for_window {
	[app_id="pavucontrol|pcmanfm|xpad|OpenTabletDriver.*"] floating enable
	[title="(?i:Open|Save) (?i:File|Folder|As)"] floating enable; sticky enable
	
	[title="Firefox â€” Sharing Indicator"] floating enable; sticky enable

	[app_id="(?:firefox|vlc|mpv)"] max_render_time 1


	[title="@floating"] floating enable
	[title="@calculator"] {
		floating enable
		sticky enable
		resize set 350px 200px
		move up 300px
		move right 650px
	}
}
# }}}
# vim:set ft=i3config foldlevel=1:
